# Twitter(X)のおすすめアルゴリズム解読レポート

## はじめに

Twitter(X)の「おすすめ」タイムラインは、ユーザーに最も関心が高いと思われるツイートを動的に表示する、高度に洗練されたシステムです。このレポートでは、オープンソース化されたTwitterのアルゴリズムを解読し、その仕組みを技術的な観点から詳細に解説します。インフルエンサーやSNS運用者が、自身のコンテンツのリーチを最大化するためのインサイトを得ることを目的とします。

### アルゴリズムの全体像

「おすすめ」タイムラインの生成は、大きく分けて3つのステージで構成されています。

1.  **候補ソーシング (Candidate Sourcing)**: タイムラインに表示する可能性のあるツイートを、様々なソースから集めてきます。これには、あなたがフォローしているアカウントからのツイート（**In-Network**）と、フォローしていないアカウントからのツイート（**Out-of-Network**）の2種類があります。Out-of-Networkのツイートは、あなたの興味関心や、あなたと似たユーザーの行動に基づいて推薦されます。

2.  **ランキング (Ranking)**: 集められた大量の候補ツイートを、あなたにとっての関連性が高い順に並べ替えます。このステージでは、機械学習モデル（特に**Heavy Ranker**と呼ばれるニューラルネットワーク）が、ツイートの様々な特徴量（いいね、リツイートの可能性、ユーザー間の関係性など）を分析し、スコアを付けます。

3.  **ヒューリスティックとフィルタリング (Heuristics & Filtering)**: ランキング付けされたタイムラインに対して、最終的な調整とフィルタリングを行います。これには、同じ作者のツイートが連続で表示されるのを防いだり（**Author Diversity**）、不適切なコンテンツを除外したり（**Visibility Filtering**）、広告や「フォローすべきアカウント」の推薦を挿入したりする処理が含まれます。

以下のセクションでは、これらの各ステージと、その背後にある主要な技術コンポーネントについて、さらに詳しく掘り下げていきます。

## ステージ1: 候補ソーシング (Candidate Sourcing)

タイムラインに表示されるツイートは、まず「候補」として様々な場所から集められます。このプロセスは、ユーザーがコンテンツを発見するための最初の、そして最も重要なステップです。候補ソースは大きく分けて「ネットワーク内」と「ネットワーク外」の2種類に分類されます。

### ネットワーク内 (In-Network) ソース: `Earlybird`

- **役割**: あなたがフォローしているアカウントが投稿した最近のツイートを取得します。「おすすめ」タイムラインの約50%は、このソースから供給されます。
- **仕組み**: `Earlybird`は、Twitterのツイート検索システムの中核です。ユーザーがタイムラインを開くと、`Earlybird`はあなたがフォローしている全ユーザーのIDを元に、彼らの最近のツイートを高速に検索し、取得します。この時点で、単純な時系列順ではなく、ある程度の「軽量なランキング（Light Ranking）」が行われ、より関連性が高いと判断されたツイートが優先されます。
- **インフルエンサーへの示唆**:
    - **フォロワーとの関係が基本**: あなたのツイートがフォロワーのタイムラインに表示されるための基本は、このIn-Networkソースです。フォロワーに直接コンテンツを届けることが、すべてのエンゲージメントの出発点となります。
    - **投稿のタイミング**: `Earlybird`はリアルタイム性を重視しているため、フォロワーがアクティブな時間帯に投稿することが、より多くのフォロワーの目に留まる可能性を高めます。

### ネットワーク外 (Out-of-Network) ソース

フォローしていないアカウントからのツイートは、アルゴリズムがあなたの興味関心を分析し、「あなたが好きかもしれない」と判断したものです。これにより、ユーザーは新しいコンテンツやクリエイターと出会うことができます。

#### 1. `User-Tweet-Entity-Graph (UTEG)`

- **役割**: 「〇〇さんがいいねしました」という形式の推薦を生成します。これは、あなたがフォローしている人のエンゲージメント（いいね、リツイート等）を基にした推薦です。
- **仕組み**: `UTEG`は、ユーザーとツイートのインタラクションをリアルタイムでグラフ構造として記録しています（`GraphJet`という技術を使用）。あなたがタイムラインを開くと、UTEGは「あなたがフォローしている人たちが、直近48時間以内にどのツイートに反応したか」を分析します。そして、その中で特に多くのエンゲージメントを集めているツイートを、あなたのタイムライン候補として推薦します。
- **インフルエンサーへの示唆**:
    - **エンゲージメントが拡散の鍵**: あなたのツイートがいいねやリツイートを多く獲得すると、そのツイートに反応した人々のフォロワーのタイムラインに、あなたのツイートが表示される可能性が高まります。つまり、エンゲージメントは、フォロワーを超えてリーチを拡大するための最も直接的な方法です。
    - **初速が重要**: UTEGは直近のエンゲージメント（24〜48時間）を重視するため、投稿後の早い段階で多くのエンゲージメントを集めることが、バイラルな拡散のきっかけとなります。

#### 2. `Follow-Recommendations-Service (FRS)` / `FutureGraph`

- **役割**: あなたが「将来フォローするかもしれない」とアルゴリズムが予測したアカウントのツイートを推薦します。
- **仕組み**: `FRS`は、もともと「フォローすべきアカウント（Who-To-Follow）」を推薦するためのサービスです。FRSは、あなたのプロフィール、過去の行動、フォロー関係などを分析し、あなたと親和性の高いアカウントを機械学習モデルでランク付けします。そして、そのランク付けされた「おすすめアカウント」が投稿したツイートを、「FutureGraph」候補としてタイムラインに供給します。
- **インフルエンサーへの示唆**:
    - **「フォローされやすいアカウント」になる**: FRSに評価されるためには、プロフィールが充実していること、特定のトピックについて一貫した投稿をしていること、質の高いフォロワーがいることなどが重要になる可能性があります。あなたのアカウントが「あるジャンルの専門家」として認識されれば、そのジャンルに興味を持つユーザーへの露出（FutureGraph推薦）が増えることが期待できます。

#### 3. `CR-Mixer`

- **役割**: 様々な「ネットワーク外」の候補ソースを統合し、調整する役割を担います。
- **仕組み**: `CR-Mixer`自体が候補を生成するわけではなく、`SimClusters`（ユーザーやツイートを興味のクラスタに分類する技術）や`TwHIN`（ユーザーやツイートをベクトル表現する技術）など、他の高度な推薦サービスを呼び出します。そして、それらのサービスから受け取った候補ツイートを、軽量なランキングやフィルタリングにかけた上で、次の「ランキング」ステージに渡します。
- **インフルエンサーへの示唆**:
    - **多様な興味グラフへの接続**: `SimClusters`などの技術は、ユーザーを「アニメ好き」「ガジェット好き」といったクラスタに分類します。あなたのコンテンツが特定のクラスタのユーザーに頻繁にエンゲージされると、そのクラスタ全体にあなたのツイートが推薦されやすくなります。特定のコミュニティや興味を持つ層に響くコンテンツを作成することが、このソースからの露出を増やす鍵です。

## ステージ2: ランキング (Ranking)

候補ソーシングで集められた何百ものツイートは、次に「ランキング」ステージに送られます。ここで、各ツイートがユーザーのタイムラインのどの位置に表示されるかが決定されます。このステージは、アルゴリズムの中核であり、ツイートのリーチを決定づける最も重要な部分です。ランキングは、**Heavy Ranker** と呼ばれる強力な機械学習モデルによって行われます。

### Heavy Rankerの役割

Heavy Rankerの目的は、ユーザーが特定のツイートに対して、ポジティブな行動（いいね、リプライなど）またはネガティブな行動（ブロック、報告など）を起こす確率を予測することです。

### 究極のスコアリング式

最終的なツイートのスコアは、以下の式に基づいた加重和によって計算されます。

`スコア = (リプライの確率 * 重み) + (リツイートの確率 * 重み) + (いいねの確率 * 重み) + ...`

重要なのは、各アクションに設定されている「重み」です。2023年4月時点での重みは以下のようになっています。

- **ポジティブなアクション（一部）:**
    - **作者が返信したリプライ (reply_engaged_by_author): 75.0**
    - リプライ (reply): 13.5
    - プロフィールクリック (good_profile_click): 12.0
    - ツイート詳細クリック (good_click): 11.0
    - リツイート (retweet): 1.0
    - いいね (fav): 0.5
- **ネガティブなアクション:**
    - **ネガティブフィードバック (negative_feedback_v2): -74.0**
    - **報告 (report): -369.0**

- **インフルエンサーへの示唆**:
    - **会話こそが王様**: 最も価値が高いのは、投稿者が自分のツイートへのリプライにさらに返信することです。これは、単なる「いいね」の150倍の価値があります。ツイートを投稿して終わりではなく、リプライ欄で積極的に会話に参加することが、リーチを最大化する上で極めて重要です。
    - **エンゲージメントの質を意識する**: 単純な「いいね」を集めるよりも、ユーザーにプロフィールをクリックさせたり、ツイートの詳細を開かせたりするような、より深いインタラクションを促すコンテンツが評価されます。
    - **ネガティブな反応は致命的**: 「興味がない」「ブロック」「ミュート」といったネガティブなフィードバックは、スコアに深刻なダメージを与えます。炎上や、ユーザーを不快にさせるコンテンツは、リーチを著しく損ないます。

### ランキングに使われる特徴量（シグナル）

Heavy Rankerは、この確率を予測するために、膨大な種類の「特徴量」を入力として使用します。これらは、アルゴリズムが「何を」見ているかを理解する上で非常に重要です。

- **ユーザーと作者の関係性 (`user_author_aggregate`)**:
    - **内容**: 特定のユーザーとツイート作者との過去のインタラクション履歴（いいね、リプライ、プロフィールクリックの回数など）。
    - **示唆**: あなたのツイートに繰り返し反応してくれる「ファン」を育てることが重要です。アルゴリズムは、ユーザーと作者の一貫した関係性を認識し、評価します。

- **ツイート自体の特徴 (`recap.tweetfeature.*`)**:
    - **内容**: ツイートに画像や動画、リンクが含まれているか、テキストの言語、ハッシュタグの数、返信ツイートかどうかなど。
    - **示唆**: ツイートのフォーマットも評価の一部です。例えば、`tweetsource.tweet.text.has_question` という特徴量は、ツイートが質問を含んでいるかを判断します。会話を促すための「問いかけ」は、リプライを誘発しやすいため、間接的に評価を高める可能性があります。

- **ソーシャルグラフの特徴 (`realgraph`, `two_hop`)**:
    - **内容**: ユーザーと作者が相互フォロー関係にあるか、ユーザーがフォローしている人が作者をフォローしているか（友達の友達関係）など。
    - **示唆**: あなたのネットワークがリーチを決定します。あなたをフォローしている人が多ければ多いほど、また、あなたのフォロワーが影響力のある人であればあるほど、あなたのツイートはより広く拡散しやすくなります。

- **ユーザーの行動履歴 (`user_aggregate`)**:
    - **内容**: ユーザー自身が過去にどのようなトピックやメディアタイプのツイートにエンゲージしてきたか。
    - **示唆**: ユーザーの興味関心に合わせたコンテンツを提供することが、パーソナライズされた推薦の鍵です。

- **埋め込み（Embedding）特徴**:
    - **内容**: `SimClusters`や`TwHIN`といった技術を使い、ユーザーやツイートを「興味ベクトル」に変換します。そして、ユーザーの興味ベクトルとツイートのベクトルがどれだけ近いか（類似度）を計算します。
    - **示唆**: あなたのツイートが特定の興味クラスタ（例：「AI研究者」クラスタ）のユーザーに評価されると、そのクラスタに属する他のユーザーにも推薦されやすくなります。一貫したテーマで質の高いコンテンツを発信し続けることで、特定の興味クラスタにおけるあなたのアカウントの評価が高まります。

## ステージ3: ヒューリスティックとフィルタリング (Heuristics & Filtering)

Heavy Rankerによるスコアリングが終わった後、タイムラインがユーザーに表示される前の最終調整が行われます。このステージでは、様々なルール（ヒューリスティック）に基づいて、タイムラインの品質、多様性、健全性が担保されます。

### 1. 可視性フィルタリング (`visibilitylib`)

- **役割**: タイムラインの「門番」として機能します。安全でないコンテンツや、ユーザーが望まないコンテンツを非表示にします。
- **仕組み**: このライブラリは、ツイートやユーザーに付けられた「セーフティラベル」（NSFW、スパムなど）や、ユーザー間の関係（ブロック、ミュート）をチェックします。ルールに抵触したコンテンツは、タイムラインから完全に除外（Drop）されたり、警告メッセージ付きで表示（Interstitial）されたりします。
- **インフルエンサーへの示唆**:
    - **健全なアカウント運用**: 当然のことながら、利用規約に違反するコンテンツや、他のユーザーからブロック・ミュートされるような行為は、リーチに直接的な悪影響を及ぼします。健全なコミュニティ参加が、アルゴリズムに評価される大前提です。

### 2. 作者の多様性 (Author Diversity)

- **役割**: 特定の1人の作者からのツイートが、タイムラインを独占するのを防ぎます。
- **仕組み**: `home-mixer`は、同じ作者からのツイートが連続で表示されると、そのスコアにペナルティを課します。具体的には、同じ作者のツイートがタイムラインに表示されるたびに、そのスコアを指数関数的に減衰させます。
    - 1番目のツイート: スコア * 1.0
    - 2番目のツイート: スコア * 0.625 (37.5%のペナルティ)
    - 3番目のツイート: スコア * 0.4375 (約56%のペナルティ)
- **インフルエンサーへの示唆**:
    - **連投は非効率**: 短時間に大量のツイートを連続で投稿しても、後のツイートほどスコアが大きく割り引かれ、フォロワーのタイムラインに表示されにくくなります。伝えたいことが多い場合でも、投稿の間隔を適切に空けることが、結果的に合計リーチを最大化する上で賢明な戦略です。

### 3. コンテンツバランス (Content Balance)

- **役割**: ネットワーク内（フォロー中）のツイートと、ネットワーク外（おすすめ）のツイートのバランスを調整します。
- **仕組み**: 「作者の多様性」と同様の割引メカニズムを使用します。ネットワーク内のツイートにはペナルティが課されませんが、ネットワーク外のツイート（UTEGやFRSなどからの推薦）は、同じソースからのツイートが続くとスコアが割引されます。これにより、特定の種類の推薦ばかりでタイムラインが埋め尽くされるのを防ぎます。
- **インフルエンサーへの示唆**:
    - **アルゴリズムはバランスを好む**: このルールは、ユーザーに多様な情報を提供するためのものです。クリエイター側で直接コントロールできる要素は少ないですが、アルゴリズムがネットワーク内外のコンテンツを混ぜ合わせて表示しようとしていることを理解しておくことは重要です。

### 4. その他のヒューリスティック

- **フィードバック疲労 (Feedback Fatigue)**: ユーザーが過去に「興味がない」などのネガティブなフィードバックをしたツイートや作者のコンテンツは、表示されにくくなります。
- **重複排除**: ユーザーが既に閲覧したツイートは、タイムラインから除外されます。

## アルゴリズムを支える主要技術

これまでに解説した各ステージは、いくつかの強力な基盤技術によって支えられています。ここでは、特に重要な3つの技術を解説します。これらを理解することで、アルゴリズムが「どのように」ユーザーやコンテンツを理解しているのか、より深く知ることができます。

### 1. `SimClusters`: 興味コミュニティの発見

- **役割**: ユーザーとツイートを、約14万5000個の「コミュニティ（クラスタ）」に分類します。
- **仕組み**:
    1.  **コミュニティの特定**: Twitterのフォロー関係を分析し、「似たようなフォロワーを持つアカウント群」を一つのコミュニティとして定義します。例えば、「AI研究者」をフォローしている人々は、互いに似たアカウントをフォローしている傾向があるため、これが「AI研究コミュニティ」として認識されます。
    2.  **ユーザーの興味をベクトル化**: あなたがフォローしているアカウントが属するコミュニティに基づいて、あなたの「興味ベクトル（InterestedIn）」が生成されます。
    3.  **ツイートをベクトル化**: あるツイートに「いいね」したユーザーたちの興味ベクトルを合計することで、そのツイートの「内容ベクトル」が生成されます。「AI研究コミュニティ」の人々が多く「いいね」したツイートは、AI研究に関連するツイートだと判断されます。
- **インフルエンサーへの示唆**:
    - **専門性がコミュニティを作る**: 特定のテーマについて一貫して質の高い情報を発信し、そのテーマに興味を持つフォロワーを集めることで、あなたは特定の`SimCluster`における中心的な存在として認識されます。
    - **コミュニティへのリーチ**: あなたのアカウントやツイートが特定のコミュニティに属すると判断されると、そのコミュニティに興味を持つ（しかし、まだあなたをフォローしていない）幅広いユーザー層への推薦（Out-of-Network）に繋がります。

### 2. `TweepCred`: ユーザーの影響力スコア

- **役割**: 全てのユーザーの「影響力」または「信頼性」を、0から100のスコアで評価します。
- **仕組み**: GoogleがWebページの重要度をランク付けするために開発した「PageRank」アルゴリズムを応用しています。ユーザーを「ページ」、メンションやリツイートを「リンク」と見なします。
    - 影響力の高いユーザー（`TweepCred`スコアが高いユーザー）からメンションやリツイートをされると、あなたの`TweepCred`スコアは大きく上昇します。
    - また、フォロワー数に対してフォロー数が極端に多いアカウントは、スコアが減点調整されます。
- **インフルエンサーへの示唆**:
    - **影響力は可視化されている**: あなたの「影響力」は、単なるフォロワー数ではなく、誰からエンゲージメントを得ているかによって、常にスコアリングされています。
    - **質の高いエンゲージメントを目指す**: 影響力のあるアカウントや、あなたの専門分野の第一人者と交流し、エンゲージメントを得ることは、あなた自身の影響力を高める上で非常に効果的です。
    - **健全なフォロー比率を保つ**: 無差別なフォローは、あなたのアカウントの信頼性を損なう可能性があります。

### 3. `RealGraph`: ユーザー間の関係性の強さ

- **役割**: ユーザーAがユーザーBに興味を持つ確率、つまり二者間の「関係性の強さ」を予測するモデルです。
- **仕組み**: フォロー関係だけでなく、過去のあらゆるインタラクション（いいね、リプライ、プロフィールクリック、DMなど）を集計し、機械学習モデル（勾配ブースティング木）で関係性の強さをスコアリングします。最近のインタラクションほど、より重視されます。
- **インフルエンサーへの示唆**:
    - **アルゴリズムはあなたの「本当のファン」を知っている**: `RealGraph`は、単にフォローされているかどうか以上に、誰があなたのコンテンツに頻繁にエンゲージしてくれる「熱心なファン」なのかを正確に把握しています。
    - **強い関係性が高いランクに繋がる**: あなたとフォロワーとの`RealGraph`スコアが高い場合、あなたのツイートはそのフォロワーのタイムラインで非常に高くランク付けされる可能性が高まります。アルゴリズムは、そのフォロワーがあなたのコンテンツに反応する確率が高いことを知っているためです。これは、安定したリーチを確保するための基盤となります。

## まとめ：アルゴリズムに評価されるための重要ポイント

このレポートでは、Twitter(X)のおすすめアルゴリズムの技術的な詳細を解読してきました。最後に、インフルエンサーやSNS運用者が明日から実践できる、最も重要なポイントをまとめます。

1.  **会話を最優先する**:
    アルゴリズムが最も高く評価するのは「会話」です。特に、あなたのツイートへのリプライに、あなた自身がさらに返信することは、「いいね」の150倍もの価値があります。投稿して終わりではなく、リプライ欄で積極的にフォロワーと対話し、コミュニティを育むことが、リーチを最大化する上で最も強力なアクションです。

2.  **質の高いエンゲージメントを促す**:
    「いいね」は最も弱いポジティブシグナルです。ユーザーにツイートの詳細やあなたのプロフィールをクリックさせるような、より深い興味を引くコンテンツを目指しましょう。質問を投げかけたり、議論を促したりすることで、単なる「いいね」以上の価値あるエンゲージメントが生まれます。

3.  **専門性を持ち、一貫性を保つ**:
    `SimClusters`は、あなたを特定の「興味コミュニティ」のメンバーとして認識します。一貫したテーマで質の高いコンテンツを発信し続けることで、その分野の専門家としてアルゴリズムに評価され、同じ興味を持つ潜在的なフォロワーへの推薦（ネットワーク外リーチ）が増加します。

4.  **影響力のあるアカウントと繋がる**:
    あなたの影響力は`TweepCred`によってスコアリングされています。影響力の高いアカウントからエンゲージメントを得ることで、あなたのスコアも向上します。あなたの専門分野における権威やインフルエンサーと、リプライなどを通じて健全な関係を築くことは、あなた自身のアカウントの信頼性を高める上で有効です。

5.  **連投を避け、投稿のタイミングを計る**:
    短時間に連続でツイートすると、「作者の多様性」のルールによって後のツイートほど評価が著しく下がります。投稿には適切な間隔を空けましょう。また、あなたのフォロワーが最もアクティブな時間帯を狙って投稿することで、エンゲージメントの初速を高め、`UTEG`によるネットワーク外への拡散を狙いやすくなります。

結論として、現在のTwitter(X)のアルゴリズムは、**一方的な情報発信者よりも、コミュニティを形成し、会話を促進するクリエイターを高く評価する**ように設計されています。フォロワーとの関係性を深め、価値ある会話を生み出すことが、成功への最も確実な道筋と言えるでしょう。
